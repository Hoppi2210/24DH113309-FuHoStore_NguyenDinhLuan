@model _24DH113309_MyStore.Models.ViewModels.ProductDetailVM
@using PagedList.Mvc;
@using PagedList;

@if (Model.TopProducts != null && Model.TopProducts.Any())
{
    <section>
        <h4 style="font-weight:bold;">Sản phẩm bán chạy</h4>
        <hr />
        <div class="list-group">
            @foreach (var product in Model.TopProducts)
            {
                <a href="@Url.Action("ProductDetail", "Home", new { id = product.ProductID })" class="list-group-item list-group-item-action">
                    <div class="d-flex w-100 justify-content-start align-items-center">
                        <img src="@product.ProductImage" style="width: 60px; height: 60px; object-fit: cover; margin-right: 10px;" />
                        <div>
                            <h6 class="mb-1">@product.ProductName</h6>
                            <small class="text-danger fw-bold">@product.ProductPrice.ToString("N0") VNĐ</small>
                        </div>
                    </div>
                </a>
            }
        </div>

        <div class="pagination-container mt-3 d-flex justify-content-center">
            @Html.PagedListPager(Model.TopProducts, page => Url.Action("ProductDetail", "Home",
                     new { id = Model.product.ProductID, quantity = Model.quantity, page = page }),
                     new PagedListRenderOptions
                     {
                         Display = PagedListDisplayMode.IfNeeded,
                         UlElementClasses = new[] { "pagination", "pagination-sm" },
                         LiElementClasses = new[] { "page-item" },
                         LinkToPreviousPageFormat = "«",
                         LinkToNextPageFormat = "»",
                         MaximumPageNumbersToDisplay = 3, // Giới hạn 3 số trang
                         DisplayLinkToFirstPage = PagedListDisplayMode.Never,
                         DisplayLinkToLastPage = PagedListDisplayMode.Never
                     })
        </div>
    </section>
}